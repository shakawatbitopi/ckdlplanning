<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="~/Content/klorofil/assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/Content/bootstrap-select.min.css" />
    <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/klorofil/assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/Content/klorofil/assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="~/Content/klorofil/assets/vendor/chartist/css/chartist-custom.css">
    <link rel="stylesheet" href="~/Content/klorofil/assets/css/main.css">
    <link rel="stylesheet" href="~/Content/klorofil/assets/css/demo.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <link rel="icon" type="image/png" sizes="96x96" href="~/Content/klorofil/assets/img/home_icon.png" />
    <link href="~/Content/SweetAlert/sweetalert.css" rel="stylesheet" />
    <link href="~/Content/Loader.css" rel="stylesheet" />
    <link href="~/Content/YearPicker/yearpicker.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    @*Label Font*@
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Glory:wght@700&display=swap" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@900&display=swap" rel="stylesheet">
</head>
<body class="layout-fullwidth">
    <div id="overlay">
        <div class="cv-spinner">
            <span class="spinner"></span>
        </div>
    </div>
    <div id="wrapper">
        <!-- NAVBAR -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="brand">
                <a style="font-family: 'Pacifico', cursive;font-size: 11pt;" href="@Common.AppSettings.BaseURL/Dashboard/Home">BIS Planning</a>
            </div>
            <div class="container-fluid">

                <div class="navbar-btn hidden">
                    <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
                </div>
                <div id="navbar-menu">
                    <input type="hidden" id="hdMenuList" />
                    <ul class="nav navbar-nav navbar-right" id="ulMainNav">
                        @Html.Raw(@Common.SessionVar.MenuNameList)
                        @*$.parseHTML("@Common.SessionVar.MenuNameList");*@
                        @*<li>
                                <a title="Dashboard" href="@Common.AppSettings.BaseURL/Dashboard/Home" class="notification">
                                    <ion-icon name="apps" size="large" style="color: purple;"></ion-icon>
                                </a>
                            </li>*@
                        @*<li>
                                <a title="Cancelled Export Order" href="@Common.AppSettings.BaseURL/ProductionReference/CancelledEO" class="notification">
                                    <ion-icon name="close-circle" size="large" style="color: purple;"></ion-icon>
                                    <span class="badge" id="txtNotificationCounter">0</span>
                                </a>
                            </li>*@
                        @*<li>
                                <a title="Pending Process" href="@Common.AppSettings.BaseURL/LinePriority/PendingProcess" class="notification">
                                    <ion-icon name="swap-horizontal" size="large" style="color: purple;"></ion-icon>
                                    <span class="badge" id="txtPendingLineNotification">0</span>
                                </a>
                            </li>*@
                        @*<li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span>PR Management</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                                <ul class="dropdown-menu">
                                    <li><a href="@Common.AppSettings.BaseURL/PRInformation/Create">PR Create</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/Production/Update">Production Update</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/PlanningBoard/PlanData">Plan Board</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/Dashboard/Home">Dashboard</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/ProductionCalender/Update">Production Calender</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/ProductionReference/CancelledEO">Cancelled EO</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/AdditionalPR/Index">Additional PR</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/Report/Report">Report</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/CompanyBuyer/Buyer">Buyer</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/PRInformation/Status">PR Status</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/PRInformation/LineSequence">Line Priority</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/PRInformation/FileRef">PR Wise File Ref</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/LinePriority/PendingProcess">Pending Line Process</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/Utility/LineProcess">Manual Line Process</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/EfficeincyMatrix/Matrix">Efficeincy Matrix</a></li>
                                    <li><a href="@Common.AppSettings.BaseURL/Utility/FileRef">File Ref Without PR</a></li>
                                </ul>
                            </li>
                            @if (Common.SessionVar.EmployeeCode == "08607" || Common.SessionVar.EmployeeCode == "09166")
                            {
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <span>Admin Menu</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="@Common.AppSettings.BaseURL/UserAccess/Index">PR User Access</a></li>
                                        <li><a href="@Common.AppSettings.BaseURL/UserAccess/LoginAuth">Login Auth</a></li>
                                        <li><a href="@Common.AppSettings.BaseURL/BuyerColor/ColorNames">Buyer Color</a></li>
                                    </ul>
                                </li>
                            }

                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="~/Content/klorofil/assets/img/user.png" class="img-circle" alt="Avatar"> <span>@Common.SessionVar.EmployeeName</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                                <ul class="dropdown-menu">
                                    <li><a href="@Common.AppSettings.BaseURL/Login/Login"><i class="lnr lnr-exit"></i> <span>Logout</span></a></li>
                                </ul>
                            </li>*@
                    </ul>
                </div>
            </div>
        </nav>
        <div id="sidebar-nav" class="sidebar">
            <div class="sidebar-scroll">
                <nav>
                    <ul class="nav">
                        <li><a href="index.html" class="active"><i class="lnr lnr-home"></i> <span>Dashboard</span></a></li>
                        <li><a href="~/Content/klorofil/elements.html" class=""><i class="lnr lnr-code"></i> <span>Elements</span></a></li>
                        <li><a href="~/Content/klorofil/charts.html" class=""><i class="lnr lnr-chart-bars"></i> <span>Charts</span></a></li>
                        <li><a href="~/Content/klorofil/panels.html" class=""><i class="lnr lnr-cog"></i> <span>Panels</span></a></li>
                        <li><a href="~/Content/klorofil/notifications.html" class=""><i class="lnr lnr-alarm"></i> <span>Notifications</span></a></li>
                        <li>
                            <a href="#subPages" data-toggle="collapse" class="collapsed"><i class="lnr lnr-file-empty"></i> <span>Pages</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                            <div id="subPages" class="collapse ">
                                <ul class="nav">
                                    <li><a href="~/Content/klorofil/page-profile.html" class="">Profile</a></li>
                                    <li><a href="~/Content/klorofil/page-login.html" class="">Login</a></li>
                                    <li><a href="~/Content/klorofil/page-lockscreen.html" class="">Lockscreen</a></li>
                                </ul>
                            </div>
                        </li>
                        <li><a href="~/Content/klorofil/tables.html" class=""><i class="lnr lnr-dice"></i> <span>Tables</span></a></li>
                        <li><a href="~/Content/klorofil/typography.html" class=""><i class="lnr lnr-text-format"></i> <span>Typography</span></a></li>
                        <li><a href="index.html" class=""><i class="lnr lnr-linearicons"></i> <span>Icons</span></a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="main">
            <div class="main-content">
                @RenderBody()
            </div>
        </div>
        <div class="clearfix"></div>
        <footer>
            <div class="container-fluid">
                <p class="copyright">&copy; @DateTime.Now.Year <a href="https://www.bitopibd.com/" target="_blank">BITOPI Group</a>. All Rights Reserved.</p>
            </div>
        </footer>
    </div>

    <script src="~/Content/klorofil/assets/vendor/jquery/jquery.min.js"></script>
    <script src="~/Content/klorofil/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/Scripts/bootstrap-select.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script src="~/Content/klorofil/assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="~/Content/klorofil/assets/vendor/jquery-easy-pie-chart/jquery.easypiechart.min.js"></script>
    <script src="~/Content/klorofil/assets/vendor/chartist/js/chartist.min.js"></script>
    <script src="~/Content/klorofil/assets/scripts/klorofil-common.js"></script>
    <script src="~/Content/SweetAlert/sweetalert.min.js"></script>
    <script src="~/Content/YearPicker/yearpicker.js"></script>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <script type="text/javascript">
        var baseURL = "@Common.AppSettings.BaseURL";
        var menuList = "";
        var G_KendoGridName = "";

        //$("#ulMainNav").inner(@Common.SessionVar.MenuNameList);
        $(function () {
            $('.selectpicker').selectpicker();
            LoadCancelledEOCount();
            /***** Kendo Grid Common Search Start******/
            $('#Kendofilter').on('input', function (e) {
            /*$("#Kendofilter").keyup(function () {*/
                var grid = $('#' + G_KendoGridName).data('kendoGrid');
                var columns = grid.columns;

                var filter = { logic: 'or', filters: [] };
                columns.forEach(function (x) {
                    if (x.field) {
                        var type = grid.dataSource.options.schema.model.fields[x.field].type;
                        if (type == 'string') {
                            filter.filters.push({
                                field: x.field,
                                operator: 'contains',
                                value: e.target.value
                            })
                        }
                        else if (type == 'number') {
                            if (isNumeric(e.target.value)) {
                                filter.filters.push({
                                    field: x.field,
                                    operator: 'eq',
                                    value: e.target.value
                                });
                            }

                        } else if (type == 'date') {
                            var data = grid.dataSource.data();
                            for (var i = 0; i < data.length; i++) {
                                var dateStr = kendo.format(x.format, data[i][x.field]);
                                if (dateStr.startsWith(e.target.value)) {
                                    filter.filters.push({
                                        field: x.field,
                                        operator: 'eq',
                                        value: data[i][x.field]
                                    })
                                }
                            }
                        } else if (type == 'boolean' && getBoolean(e.target.value) !== null) {
                            var bool = getBoolean(e.target.value);
                            filter.filters.push({
                                field: x.field,
                                operator: 'eq',
                                value: bool
                            });
                        }
                    }
                });
                grid.dataSource.filter(filter);
            });
            //$('.KendoCommonfilter').on('input', function (e) {
            //    var _TableName = $(this).attr('grid-id');
            //    SearchGridData(_TableName, e);
            //});
            $(document).delegate('.KendoCommonfilter', 'keyup', function (e) {
                var _TableName = $(this).attr('filter-id');
                SearchGridData(_TableName, e);
            });
            //$('.KendoCommonfilter').on('input', function (e) {
            //    G_KendoGridName = $(this).attr("filter-id");
            //    var grid = $('#' + G_KendoGridName).data('kendoGrid');
            //    var columns = grid.columns;

            //    var filter = { logic: 'or', filters: [] };
            //    columns.forEach(function (x) {
            //        if (x.field) {
            //            var type = grid.dataSource.options.schema.model.fields[x.field].type;
            //            if (type == 'string') {
            //                filter.filters.push({
            //                    field: x.field,
            //                    operator: 'contains',
            //                    value: e.target.value
            //                })
            //            }
            //            else if (type == 'number') {
            //                if (isNumeric(e.target.value)) {
            //                    filter.filters.push({
            //                        field: x.field,
            //                        operator: 'eq',
            //                        value: e.target.value
            //                    });
            //                }

            //            } else if (type == 'date') {
            //                var data = grid.dataSource.data();
            //                for (var i = 0; i < data.length; i++) {
            //                    var dateStr = kendo.format(x.format, data[i][x.field]);
            //                    if (dateStr.startsWith(e.target.value)) {
            //                        filter.filters.push({
            //                            field: x.field,
            //                            operator: 'eq',
            //                            value: data[i][x.field]
            //                        })
            //                    }
            //                }
            //            } else if (type == 'boolean' && getBoolean(e.target.value) !== null) {
            //                var bool = getBoolean(e.target.value);
            //                filter.filters.push({
            //                    field: x.field,
            //                    operator: 'eq',
            //                    value: bool
            //                });
            //            }
            //        }
            //    });
            //    grid.dataSource.filter(filter);
            //});
        /***** Kendo Grid Search End******/
        });
        $(document).ajaxStart(function () {
            $("#overlay").fadeIn();
        });
        $(document).ajaxComplete(function () {
            $("#overlay").fadeOut();
        });
        $(document).ajaxError(function () {
            $("#overlay").fadeOut();
        });
        $(window).load(function () {
            $("#overlay").fadeOut();
        });

        $('.numericDecimal').keypress(function (event) {
            return isNumber(event, this)
        });

        function LoadCancelledEOCount() {
            $.ajax({
                type: "GET",
                url: baseURL + "/ProductionReference/LoadCancelledEOCount",
                data: {},
                contentType: "application/json",
                datatype: "json",
                async: true,
                success: function (data) {
                    var x = JSON.parse(data);
                    $("#txtNotificationCounter").text(x[0].Qty);
                    $("#txtPendingLineNotification").text(x[0].PendingProcess);
                }
            });
        }

        jQuery.fn.ForceNumericOnly =
            function () {
                return this.each(function () {
                    $(this).keydown(function (e) {
                        var key = e.charCode || e.keyCode || 0;
                        // allow backspace, tab, delete, enter, arrows, numbers and keypad numbers ONLY
                        // home, end, period, and numpad decimal
                        return (
                            key == 8 ||
                            key == 9 ||
                            key == 13 ||
                            key == 46 ||
                            key == 110 ||
                            key == 190 ||
                            (key >= 35 && key <= 40) ||
                            (key >= 48 && key <= 57) ||
                            (key >= 96 && key <= 105));
                    });
                });
            };

        function isNumber(evt, element) {
            var charCode = (evt.which) ? evt.which : event.keyCode
            if (
                (charCode != 45 || $(element).val().indexOf('-') != -1) &&
                (charCode != 46 || $(element).val().indexOf('.') != -1) &&
                (charCode < 48 || charCode > 57))
                return false;
            return true;
        }

        function SearchGridData(TableName, e) {
            G_KendoGridName = TableName;
            var grid = $('#' + G_KendoGridName).data('kendoGrid');
            var columns = grid.columns;

            var filter = { logic: 'or', filters: [] };
            columns.forEach(function (x) {
                if (x.field) {
                    var type = grid.dataSource.options.schema.model.fields[x.field].type;
                    if (type == 'string') {
                        filter.filters.push({
                            field: x.field,
                            operator: 'contains',
                            value: e.target.value
                        })
                    }
                    else if (type == 'number') {
                        if (isNumeric(e.target.value)) {
                            filter.filters.push({
                                field: x.field,
                                operator: 'eq',
                                value: e.target.value
                            });
                        }

                    } else if (type == 'date') {
                        var data = grid.dataSource.data();
                        for (var i = 0; i < data.length; i++) {
                            var dateStr = kendo.format(x.format, data[i][x.field]);
                            if (dateStr.startsWith(e.target.value)) {
                                filter.filters.push({
                                    field: x.field,
                                    operator: 'eq',
                                    value: data[i][x.field]
                                })
                            }
                        }
                    } else if (type == 'boolean' && getBoolean(e.target.value) !== null) {
                        var bool = getBoolean(e.target.value);
                        filter.filters.push({
                            field: x.field,
                            operator: 'eq',
                            value: bool
                        });
                    }
                }
            });
            grid.dataSource.filter(filter);
        }
        function isNumeric(n) {
            return !isNaN(parseFloat(n)) && isFinite(n);
        }
    </script>
    @Html.Partial("_KendoCssScripts")
    @RenderSection("scripts", required: false)

    <style type="text/css">
        .customError {
            background-color: #ffeeee;
            border: 1px solid #ff0000;
        }

        .modal-lg {
            margin-left: -40%;
            width: 180%
        }

        .notification:hover {
            background: red;
        }

        .notification .badge {
            position: absolute;
            top: 10px;
            right: 0;
            background: red;
            color: white;
        }

        ion-icon {
            pointer-events: none;
        }

        label {
            margin-bottom: 0px;
            font-family: 'Glory', sans-serif;
            color: #4c4f4a;
        }

        .dropdown-menu > li > a {
            color: #3b4957;
            font-family: 'Glory', sans-serif;
        }

        .navbar-nav > li > a > span {
            font-family: 'Glory', sans-serif;
            color: #113e6a;
        }

        .k-grid-header th.k-header > .k-link {
            padding: .2em .2em .2em 0;
            font-family: 'Inconsolata', monospace;
        }

        ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
            font-family: "Source Sans Pro", sans-serif;
        }

        :-ms-input-placeholder { /* Internet Explorer 10-11 */
            font-family: "Source Sans Pro", sans-serif;
        }

        ::-ms-input-placeholder { /* Microsoft Edge */
            font-family: "Source Sans Pro", sans-serif;
        }
    </style>
</body>
</html>
